!function(){"use strict";function m(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v=document.querySelector(".header__btn"),h=document.querySelector(".nav"),e=m(h.querySelectorAll(".nav__link--submenu")),o=m(h.querySelectorAll(".nav__submenu-wrap")),f=document.querySelector(".overlay"),y=m(document.querySelectorAll(".modal"));v&&v.addEventListener("click",function(){v.classList.toggle("toggle"),f.classList.toggle("show"),h.classList.toggle("open")}),f.addEventListener("click",function(){var e=v.classList.contains("toggle")||h.classList.contains("open"),t=m(document.querySelectorAll(".modal__wrap-hidden"));if(e&&(v.classList.remove("toggle"),f.classList.remove("show"),h.classList.remove("open")),0<y.length){var o=!0,n=!1,r=void 0;try{for(var l,s=y[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){l.value.classList.remove("show")}}catch(e){n=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}f.classList.remove("show","show-modal")}if(0<t.length){var c=!0,a=!1,i=void 0;try{for(var d,u=t[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){d.value.classList.remove("show")}}catch(e){a=!0,i=e}finally{try{c||null==u.return||u.return()}finally{if(a)throw i}}}}),document.documentElement.clientWidth<=1170&&e.forEach(function(e,t){e.addEventListener("click",function(e){e.preventDefault(),o[t].classList.toggle("open")})});var t,n,r=document.querySelector(".user__menu-link--submenu");r&&(n="open",(t=r).addEventListener("click",function(e){e.preventDefault(),t.classList.toggle(n)}));var l=m(document.querySelectorAll(".scheduler-food__btn-submenu")),s=m(document.querySelectorAll(".scheduler-food__item-dropdown"));0<l.length&&l.forEach(function(e,t){e.addEventListener("click",function(){e.classList.toggle("open"),s[t].classList.toggle("open")})});var c=m(document.querySelectorAll(".buy__item-arrow")),a=m(document.querySelectorAll(".buy__item-dropdown"));0<c.length&&c.forEach(function(t,o){t.addEventListener("click",function(){if(t.classList.contains("open"))t.classList.remove("open"),a[o].classList.remove("open"),a[o].parentElement.classList.remove("open");else{for(var e=0;e<c.length;e++)c[e].classList.remove("open"),a[e].classList.remove("open"),a[e].parentElement.classList.remove("open");t.classList.add("open"),a[o].classList.add("open"),a[o].parentElement.classList.add("open")}})});var i=m(document.querySelectorAll(".buy__item-action")),d=m(document.querySelectorAll(".buy__item-action + .actions"));0<i.length&&i.forEach(function(t,o){t.addEventListener("click",function(){if(t.classList.contains("show"))t.classList.remove("show"),d[o].classList.remove("show");else{for(var e=0;e<i.length;e++)i[e].classList.remove("show"),d[e].classList.remove("show");t.classList.add("show"),d[o].classList.add("show")}})}),document.documentElement.addEventListener("click",function(e){var t=document.createElement("div"),o=document.querySelector(".actions.show")||t,n=document.querySelector(".buy__item-action.show")||t;e.target===n||e.target===o||o.contains(e.target)||(o.classList.remove("show"),n.classList.remove("show"))});var u=m(document.querySelectorAll(".modal")),L=m(document.querySelectorAll(".modal__btn-close")),w=document.querySelector(".overlay"),p=m(document.querySelectorAll(".buy__item-add")),g=document.querySelector(".modal--buy");0<p.length&&p.forEach(function(e){e.addEventListener("click",function(){w.classList.add("show","show-modal"),g.classList.add("show")})});var _=m(document.querySelectorAll(".modal__wrap-hidden"));0<L.length&&L.forEach(function(e,l){e.addEventListener("click",function(){if(u[l].classList.remove("show"),w.classList.remove("show","show-modal"),0<_.length){var e=!0,t=!1,o=void 0;try{for(var n,r=_[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){n.value.classList.remove("show")}}catch(e){t=!0,o=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw o}}}})});var S=m(document.querySelectorAll(".modal-add-user")),E=document.querySelector(".modal--add-user");0<S.length&&S.forEach(function(e){e.addEventListener("click",function(){w.classList.add("show","show-modal"),E.classList.add("show")})});var q=m(document.querySelectorAll(".popup-cook-myself")),b=document.querySelector(".modal--recipe");if(0<q.length){q.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),w.classList.add("show","show-modal"),b.classList.add("show")})});var A=b.querySelector(".modal__btn-title"),k=b.querySelector(".modal__wrap-hidden"),x=b.querySelector(".modal__btn-close-wrap-hidden");A.addEventListener("click",function(){k.classList.add("show")}),x.addEventListener("click",function(){k.classList.remove("show")})}var j=m(document.querySelectorAll(".form__recovery-input input"));if(0<j.length){var D=!0,O=!1,I=void 0;try{for(var T,W=function(){var e=T.value;e.addEventListener("input",function(){e.value?e.parentElement.classList.add("hide"):e.parentElement.classList.remove("hide")})},z=j[Symbol.iterator]();!(D=(T=z.next()).done);D=!0)W()}catch(e){O=!0,I=e}finally{try{D||null==z.return||z.return()}finally{if(O)throw I}}}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250ZW5kL2pzL21lbnUuanMiLCJmcm9udGVuZC9qcy90b2dnbGVDbGFzcy5qcyIsImZyb250ZW5kL2pzL21vZGFsLmpzIiwiZnJvbnRlbmQvanMvaW5wdXQtcGxhY2Vob2xkZXIuanMiXSwibmFtZXMiOlsiYnRuVG9nZ2xlTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lbnUiLCJpdGVtc1N1Ym1lbnUiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VibWVudXMiLCJvdmVybGF5IiwibW9kYWxzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbmRpdGlvbiIsImNvbnRhaW5zIiwibW9kYWxXcmFwSGlkZGVuIiwicmVtb3ZlIiwibGVuZ3RoIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJ2YWx1ZSIsImVyciIsInJldHVybiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJlbGVtZW50IiwiY2xhc3NOYW1lIiwidXNlclN1Ym1lbnUiLCJzY2hlZHVsZXJJdGVtQnV0dG9ucyIsInNjaGVkdWxlclN1Ym1lbnUiLCJidG4iLCJidXlJdGVtQnV0dG9ucyIsImJ1eUl0ZW1Ecm9wZG93biIsInBhcmVudEVsZW1lbnQiLCJpIiwiYWRkIiwiYnV5SXRlbUFjdGlvbnMiLCJhY3Rpb25zIiwiZWxlbSIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuQWN0aW9ucyIsIm9wZW5CdG5BY3Rpb25zIiwidGFyZ2V0IiwiY2xvc2VNb2RhbHMiLCJidXR0b25zT3Blbk1vZGFsQnV5IiwibW9kYWxCdXkiLCJidXR0b25zT3Blbk1vZGFsQWRkVXNlciIsIm1vZGFsQWRkVXNlciIsImJ1dHRvbnNPcGVuTW9kYWxSZWNpcGUiLCJtb2RhbFJlY2lwZSIsImJ0bk9wZW5XcmFwSGlkZGVuIiwid3JhcEhpZGRlbiIsImNsb3NlV3JhcEhpZGRlbiIsImlucHV0cyIsIl9sb29wIiwiaW5wdXQiXSwibWFwcGluZ3MiOiI4V0FBQSxJQUFNQSxFQUFnQkMsU0FBU0MsY0FBVCxnQkFDaEJDLEVBQU9GLFNBQVNDLGNBQVQsUUFDUEUsRUFBWUMsRUFBT0YsRUFBS0csaUJBQUwsd0JBQ25CQyxFQUFRRixFQUFPRixFQUFLRyxpQkFBTCx1QkFDZkUsRUFBVVAsU0FBU0MsY0FBVCxZQUNWTyxFQUFNSixFQUFPSixTQUFTSyxpQkFBVCxXQUVmTixHQUNGQSxFQUFjVSxpQkFBZCxRQUF3QyxXQUN0Q1YsRUFBY1csVUFBVUMsT0FBeEIsVUFDQUosRUFBUUcsVUFBVUMsT0FBbEIsUUFDQVQsRUFBS1EsVUFBVUMsT0FBZixVQUlKSixFQUFRRSxpQkFBUixRQUFrQyxXQUNoQyxJQUFNRyxFQUFZYixFQUFjVyxVQUFVRyxTQUF4QixXQUNBWCxFQUFLUSxVQUFVRyxTQUFmLFFBRVpDLEVBQWVWLEVBQU9KLFNBQVNLLGlCQUFULHdCQVE1QixHQU5JTyxJQUNGYixFQUFjVyxVQUFVSyxPQUF4QixVQUNBUixFQUFRRyxVQUFVSyxPQUFsQixRQUNBYixFQUFLUSxVQUFVSyxPQUFmLFNBR2tCLEVBQWhCUCxFQUFPUSxPQUFZLENBQUEsSUFBQUMsR0FBQSxFQUFBQyxHQUFBLEVBQUFDLE9BQUFDLEVBQUEsSUFDckIsSUFBQSxJQUFBQyxFQUFBQyxFQUFvQmQsRUFBcEJlLE9BQUFDLGNBQUFQLEdBQUFJLEVBQUFDLEVBQUFHLFFBQUFDLE1BQUFULEdBQUEsRUFBNEIsQ0FBQUksRUFBQU0sTUFDcEJqQixVQUFVSyxPQUFoQixTQUZtQixNQUFBYSxHQUFBVixHQUFBLEVBQUFDLEVBQUFTLEVBQUEsUUFBQSxJQUFBWCxHQUFBLE1BQUFLLEVBQUFPLFFBQUFQLEVBQUFPLFNBQUEsUUFBQSxHQUFBWCxFQUFBLE1BQUFDLEdBSXJCWixFQUFRRyxVQUFVSyxPQUFsQixPQUFBLGNBR0YsR0FBNkIsRUFBekJELEVBQWdCRSxPQUFZLENBQUEsSUFBQWMsR0FBQSxFQUFBQyxHQUFBLEVBQUFDLE9BQUFaLEVBQUEsSUFDOUIsSUFBQSxJQUFBYSxFQUFBQyxFQUFnQnBCLEVBQWhCUyxPQUFBQyxjQUFBTSxHQUFBRyxFQUFBQyxFQUFBVCxRQUFBQyxNQUFBSSxHQUFBLEVBQWlDLENBQUFHLEVBQUFOLE1BQzdCakIsVUFBVUssT0FBWixTQUY0QixNQUFBYSxHQUFBRyxHQUFBLEVBQUFDLEVBQUFKLEVBQUEsUUFBQSxJQUFBRSxHQUFBLE1BQUFJLEVBQUFMLFFBQUFLLEVBQUFMLFNBQUEsUUFBQSxHQUFBRSxFQUFBLE1BQUFDLE9BTzlCaEMsU0FBU21DLGdCQUFnQkMsYUFBZSxNQUMxQ2pDLEVBQWFrQyxRQUFRLFNBQUNDLEVBQU1DLEdBQzFCRCxFQUFLN0IsaUJBQUwsUUFBK0IsU0FBQytCLEdBQzlCQSxFQUFNQyxpQkFDTm5DLEVBQVNpQyxHQUFPN0IsVUFBVUMsT0FBMUIsWUM3Q04sSUFBcUIrQixFQUFTQyxFQU94QkMsRUFBYzVDLFNBQVNDLGNBQVQsNkJBRWhCMkMsSUFUMEJELEVBVWpCLFFBVlFELEVBVVBFLEdBVEpuQyxpQkFBUixRQUFrQyxTQUFDK0IsR0FDakNBLEVBQU1DLGlCQUNOQyxFQUFRaEMsVUFBVUMsT0FBT2dDLE1BVTdCLElBQU1FLEVBQW9CekMsRUFBT0osU0FBU0ssaUJBQVQsaUNBQzNCeUMsRUFBZ0IxQyxFQUFPSixTQUFTSyxpQkFBVCxtQ0FFSyxFQUE5QndDLEVBQXFCN0IsUUFDdkI2QixFQUFxQlIsUUFBUSxTQUFDVSxFQUFLUixHQUNqQ1EsRUFBSXRDLGlCQUFKLFFBQThCLFdBQzVCc0MsRUFBSXJDLFVBQVVDLE9BQWQsUUFDQW1DLEVBQWlCUCxHQUFPN0IsVUFBVUMsT0FBbEMsWUFLTixJQUFNcUMsRUFBYzVDLEVBQU9KLFNBQVNLLGlCQUFULHFCQUNyQjRDLEVBQWU3QyxFQUFPSixTQUFTSyxpQkFBVCx3QkFFQSxFQUF4QjJDLEVBQWVoQyxRQUNqQmdDLEVBQWVYLFFBQVEsU0FBQ1UsRUFBS1IsR0FDM0JRLEVBQUl0QyxpQkFBSixRQUE4QixXQUM1QixHQUFJc0MsRUFBSXJDLFVBQVVHLFNBQWQsUUFDRmtDLEVBQUlyQyxVQUFVSyxPQUFkLFFBQ0FrQyxFQUFnQlYsR0FBTzdCLFVBQVVLLE9BQWpDLFFBQ0FrQyxFQUFnQlYsR0FBT1csY0FBY3hDLFVBQVVLLE9BQS9DLFlBQ0ssQ0FDTCxJQUFLLElBQUlvQyxFQUFJLEVBQUdBLEVBQUlILEVBQWVoQyxPQUFRbUMsSUFDekNILEVBQWVHLEdBQUd6QyxVQUFVSyxPQUE1QixRQUNBa0MsRUFBZ0JFLEdBQUd6QyxVQUFVSyxPQUE3QixRQUNBa0MsRUFBZ0JFLEdBQUdELGNBQWN4QyxVQUFVSyxPQUEzQyxRQUdGZ0MsRUFBSXJDLFVBQVUwQyxJQUFkLFFBQ0FILEVBQWdCVixHQUFPN0IsVUFBVTBDLElBQWpDLFFBQ0FILEVBQWdCVixHQUFPVyxjQUFjeEMsVUFBVTBDLElBQS9DLGFBTVIsSUFBTUMsRUFBY2pELEVBQU9KLFNBQVNLLGlCQUFULHNCQUNyQmlELEVBQU9sRCxFQUFPSixTQUFTSyxpQkFBVCxpQ0FFUSxFQUF4QmdELEVBQWVyQyxRQUNqQnFDLEVBQWVoQixRQUFRLFNBQUNVLEVBQUtSLEdBQzNCUSxFQUFJdEMsaUJBQUosUUFBOEIsV0FDNUIsR0FBSXNDLEVBQUlyQyxVQUFVRyxTQUFkLFFBQ0ZrQyxFQUFJckMsVUFBVUssT0FBZCxRQUNBdUMsRUFBUWYsR0FBTzdCLFVBQVVLLE9BQXpCLFlBQ0ssQ0FDTCxJQUFLLElBQUlvQyxFQUFJLEVBQUdBLEVBQUlFLEVBQWVyQyxPQUFRbUMsSUFDekNFLEVBQWVGLEdBQUd6QyxVQUFVSyxPQUE1QixRQUNBdUMsRUFBUUgsR0FBR3pDLFVBQVVLLE9BQXJCLFFBR0ZnQyxFQUFJckMsVUFBVTBDLElBQWQsUUFDQUUsRUFBUWYsR0FBTzdCLFVBQVUwQyxJQUF6QixhQU1ScEQsU0FBU21DLGdCQUFnQjFCLGlCQUF6QixRQUFtRCxTQUFDK0IsR0FDbEQsSUFBTWUsRUFBT3ZELFNBQVN3RCxjQUFULE9BQ1BDLEVBQWN6RCxTQUFTQyxjQUFULGtCQUEyQ3NELEVBQ3pERyxFQUFpQjFELFNBQVNDLGNBQVQsMkJBQW9Ec0QsRUFFdkVmLEVBQU1tQixTQUFXRCxHQUFrQmxCLEVBQU1tQixTQUFXRixHQUFnQkEsRUFBWTVDLFNBQVMyQixFQUFNbUIsVUFDakdGLEVBQVkvQyxVQUFVSyxPQUF0QixRQUNBMkMsRUFBZWhELFVBQVVLLE9BQXpCLFdDL0VKLElBQU1QLEVBQU1KLEVBQU9KLFNBQVNLLGlCQUFULFdBQ2J1RCxFQUFXeEQsRUFBT0osU0FBU0ssaUJBQVQsc0JBQ2xCRSxFQUFVUCxTQUFTQyxjQUFULFlBRVY0RCxFQUFtQnpELEVBQU9KLFNBQVNLLGlCQUFULG1CQUMxQnlELEVBQVc5RCxTQUFTQyxjQUFULGVBRWdCLEVBQTdCNEQsRUFBb0I3QyxRQUN0QjZDLEVBQW9CeEIsUUFBUSxTQUFDVSxHQUMzQkEsRUFBSXRDLGlCQUFKLFFBQThCLFdBQzVCRixFQUFRRyxVQUFVMEMsSUFBbEIsT0FBQSxjQUNBVSxFQUFTcEQsVUFBVTBDLElBQW5CLFlBS04sSUFBTXRDLEVBQWVWLEVBQU9KLFNBQVNLLGlCQUFULHdCQUVILEVBQXJCdUQsRUFBWTVDLFFBQ2Q0QyxFQUFZdkIsUUFBUSxTQUFDVSxFQUFLUixHQUN4QlEsRUFBSXRDLGlCQUFKLFFBQThCLFdBSTVCLEdBSEFELEVBQU8rQixHQUFPN0IsVUFBVUssT0FBeEIsUUFDQVIsRUFBUUcsVUFBVUssT0FBbEIsT0FBQSxjQUU2QixFQUF6QkQsRUFBZ0JFLE9BQVksQ0FBQSxJQUFBQyxHQUFBLEVBQUFDLEdBQUEsRUFBQUMsT0FBQUMsRUFBQSxJQUM5QixJQUFBLElBQUFDLEVBQUFDLEVBQWdCUixFQUFoQlMsT0FBQUMsY0FBQVAsR0FBQUksRUFBQUMsRUFBQUcsUUFBQUMsTUFBQVQsR0FBQSxFQUFpQyxDQUFBSSxFQUFBTSxNQUM3QmpCLFVBQVVLLE9BQVosU0FGNEIsTUFBQWEsR0FBQVYsR0FBQSxFQUFBQyxFQUFBUyxFQUFBLFFBQUEsSUFBQVgsR0FBQSxNQUFBSyxFQUFBTyxRQUFBUCxFQUFBTyxTQUFBLFFBQUEsR0FBQVgsRUFBQSxNQUFBQyxTQVN0QyxJQUFNNEMsRUFBdUIzRCxFQUFPSixTQUFTSyxpQkFBVCxvQkFDOUIyRCxFQUFlaEUsU0FBU0MsY0FBVCxvQkFFZ0IsRUFBakM4RCxFQUF3Qi9DLFFBQzFCK0MsRUFBd0IxQixRQUFRLFNBQUNVLEdBQy9CQSxFQUFJdEMsaUJBQUosUUFBOEIsV0FDNUJGLEVBQVFHLFVBQVUwQyxJQUFsQixPQUFBLGNBQ0FZLEVBQWF0RCxVQUFVMEMsSUFBdkIsWUFLTixJQUFNYSxFQUFzQjdELEVBQU9KLFNBQVNLLGlCQUFULHVCQUM3QjZELEVBQWNsRSxTQUFTQyxjQUFULGtCQUVwQixHQUFvQyxFQUFoQ2dFLEVBQXVCakQsT0FBWSxDQUNyQ2lELEVBQXVCNUIsUUFBUSxTQUFDVSxHQUM5QkEsRUFBSXRDLGlCQUFKLFFBQThCLFNBQUMrQixHQUM3QkEsRUFBTUMsaUJBQ05sQyxFQUFRRyxVQUFVMEMsSUFBbEIsT0FBQSxjQUNBYyxFQUFZeEQsVUFBVTBDLElBQXRCLFlBSUosSUFBTWUsRUFBb0JELEVBQVlqRSxjQUFaLHFCQUNwQm1FLEVBQWFGLEVBQVlqRSxjQUFaLHVCQUNib0UsRUFBa0JILEVBQVlqRSxjQUFaLGlDQUV4QmtFLEVBQWtCMUQsaUJBQWxCLFFBQTRDLFdBQzFDMkQsRUFBVzFELFVBQVUwQyxJQUFyQixVQUdGaUIsRUFBZ0I1RCxpQkFBaEIsUUFBMEMsV0FDeEMyRCxFQUFXMUQsVUFBVUssT0FBckIsVUNsRUosSUFBTXVELEVBQU1sRSxFQUFPSixTQUFTSyxpQkFBVCxnQ0FFbkIsR0FBb0IsRUFBaEJpRSxFQUFPdEQsT0FBWSxDQUFBLElBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxPQUFBQyxFQUFBLElBQ3JCLElBRHFCLElBQ3JCQyxFQURxQmtELEVBQUEsV0FBQSxJQUNWQyxFQURVbkQsRUFBQU0sTUFFbkI2QyxFQUFNL0QsaUJBQU4sUUFBZ0MsV0FDMUIrRCxFQUFNN0MsTUFDUjZDLEVBQU10QixjQUFjeEMsVUFBVTBDLElBQTlCLFFBRUFvQixFQUFNdEIsY0FBY3hDLFVBQVVLLE9BQTlCLFdBTE5PLEVBQW9CZ0QsRUFBcEIvQyxPQUFBQyxjQUFBUCxHQUFBSSxFQUFBQyxFQUFBRyxRQUFBQyxNQUFBVCxHQUFBLEVBQTRCc0QsSUFEUCxNQUFBM0MsR0FBQVYsR0FBQSxFQUFBQyxFQUFBUyxFQUFBLFFBQUEsSUFBQVgsR0FBQSxNQUFBSyxFQUFBTyxRQUFBUCxFQUFBTyxTQUFBLFFBQUEsR0FBQVgsRUFBQSxNQUFBQyIsImZpbGUiOiJmcm9udGVuZC9qcy9tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnRuVG9nZ2xlTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5oZWFkZXJfX2J0bmApO1xuY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcbmNvbnN0IGl0ZW1zU3VibWVudSA9IFsuLi5tZW51LnF1ZXJ5U2VsZWN0b3JBbGwoYC5uYXZfX2xpbmstLXN1Ym1lbnVgKV07XG5jb25zdCBzdWJtZW51cyA9IFsuLi5tZW51LnF1ZXJ5U2VsZWN0b3JBbGwoYC5uYXZfX3N1Ym1lbnUtd3JhcGApXTtcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAub3ZlcmxheWApO1xuY29uc3QgbW9kYWxzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5tb2RhbGApXTtcblxuaWYgKGJ0blRvZ2dsZU1lbnUpIHtcbiAgYnRuVG9nZ2xlTWVudS5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcbiAgICBidG5Ub2dnbGVNZW51LmNsYXNzTGlzdC50b2dnbGUoYHRvZ2dsZWApO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShgc2hvd2ApO1xuICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShgb3BlbmApO1xuICB9KTtcbn1cblxub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcbiAgY29uc3QgY29uZGl0aW9uID0gYnRuVG9nZ2xlTWVudS5jbGFzc0xpc3QuY29udGFpbnMoYHRvZ2dsZWApXG4gICAgICAgICAgICAgICAgIHx8IG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKGBvcGVuYCk7XG5cbiAgY29uc3QgbW9kYWxXcmFwSGlkZGVuID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5tb2RhbF9fd3JhcC1oaWRkZW5gKV07XG5cbiAgaWYgKGNvbmRpdGlvbikge1xuICAgIGJ0blRvZ2dsZU1lbnUuY2xhc3NMaXN0LnJlbW92ZShgdG9nZ2xlYCk7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKGBzaG93YCk7XG4gICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKGBvcGVuYCk7XG4gIH1cblxuICBpZiAobW9kYWxzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IG1vZGFsIG9mIG1vZGFscykge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgIH1cbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoYHNob3dgLCBgc2hvdy1tb2RhbGApO1xuICB9XG5cbiAgaWYgKG1vZGFsV3JhcEhpZGRlbi5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChjb25zdCBtIG9mIG1vZGFsV3JhcEhpZGRlbikge1xuICAgICAgbS5jbGFzc0xpc3QucmVtb3ZlKGBzaG93YCk7XG4gICAgfVxuICB9XG59KTtcblxuaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA8PSAxMTcwKSB7XG4gIGl0ZW1zU3VibWVudS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzdWJtZW51c1tpbmRleF0uY2xhc3NMaXN0LnRvZ2dsZShgb3BlbmApO1xuICAgIH0pO1xuICB9KTtcbn1cbiIsImNvbnN0IHRvZ2dsZUNsYXNzID0gKGVsZW1lbnQsIGNsYXNzTmFtZSkgPT4ge1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcbiAgfSk7XG59O1xuXG5jb25zdCB1c2VyU3VibWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC51c2VyX19tZW51LWxpbmstLXN1Ym1lbnVgKTtcblxuaWYgKHVzZXJTdWJtZW51KSB7XG4gIHRvZ2dsZUNsYXNzKHVzZXJTdWJtZW51LCBgb3BlbmApO1xufVxuXG5jb25zdCBzY2hlZHVsZXJJdGVtQnV0dG9ucyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuc2NoZWR1bGVyLWZvb2RfX2J0bi1zdWJtZW51YCldO1xuY29uc3Qgc2NoZWR1bGVyU3VibWVudSA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuc2NoZWR1bGVyLWZvb2RfX2l0ZW0tZHJvcGRvd25gKV07XG5cbmlmIChzY2hlZHVsZXJJdGVtQnV0dG9ucy5sZW5ndGggPiAwKSB7XG4gIHNjaGVkdWxlckl0ZW1CdXR0b25zLmZvckVhY2goKGJ0biwgaW5kZXgpID0+IHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZShgb3BlbmApO1xuICAgICAgc2NoZWR1bGVyU3VibWVudVtpbmRleF0uY2xhc3NMaXN0LnRvZ2dsZShgb3BlbmApO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgYnV5SXRlbUJ1dHRvbnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLmJ1eV9faXRlbS1hcnJvd2ApXTtcbmNvbnN0IGJ1eUl0ZW1Ecm9wZG93biA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuYnV5X19pdGVtLWRyb3Bkb3duYCldO1xuXG5pZiAoYnV5SXRlbUJ1dHRvbnMubGVuZ3RoID4gMCkge1xuICBidXlJdGVtQnV0dG9ucy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xuICAgICAgaWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoYG9wZW5gKSkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShgb3BlbmApO1xuICAgICAgICBidXlJdGVtRHJvcGRvd25baW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoYG9wZW5gKTtcbiAgICAgICAgYnV5SXRlbURyb3Bkb3duW2luZGV4XS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYG9wZW5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnV5SXRlbUJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBidXlJdGVtQnV0dG9uc1tpXS5jbGFzc0xpc3QucmVtb3ZlKGBvcGVuYCk7XG4gICAgICAgICAgYnV5SXRlbURyb3Bkb3duW2ldLmNsYXNzTGlzdC5yZW1vdmUoYG9wZW5gKTtcbiAgICAgICAgICBidXlJdGVtRHJvcGRvd25baV0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGBvcGVuYCk7XG4gICAgICAgIH1cblxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChgb3BlbmApO1xuICAgICAgICBidXlJdGVtRHJvcGRvd25baW5kZXhdLmNsYXNzTGlzdC5hZGQoYG9wZW5gKTtcbiAgICAgICAgYnV5SXRlbURyb3Bkb3duW2luZGV4XS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoYG9wZW5gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IGJ1eUl0ZW1BY3Rpb25zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5idXlfX2l0ZW0tYWN0aW9uYCldO1xuY29uc3QgYWN0aW9ucyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuYnV5X19pdGVtLWFjdGlvbiArIC5hY3Rpb25zYCldO1xuXG5pZiAoYnV5SXRlbUFjdGlvbnMubGVuZ3RoID4gMCkge1xuICBidXlJdGVtQWN0aW9ucy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xuICAgICAgaWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoYHNob3dgKSkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgICAgICBhY3Rpb25zW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKGBzaG93YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1eUl0ZW1BY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYnV5SXRlbUFjdGlvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgICAgICAgIGFjdGlvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoYHNob3dgKTtcbiAgICAgICAgYWN0aW9uc1tpbmRleF0uY2xhc3NMaXN0LmFkZChgc2hvd2ApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGV2ZW50KSA9PiB7XG4gIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcbiAgY29uc3Qgb3BlbkFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWN0aW9ucy5zaG93YCkgfHwgZWxlbTtcbiAgY29uc3Qgb3BlbkJ0bkFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnV5X19pdGVtLWFjdGlvbi5zaG93YCkgfHwgZWxlbTtcblxuICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBvcGVuQnRuQWN0aW9ucyAmJiBldmVudC50YXJnZXQgIT09IG9wZW5BY3Rpb25zICYmICFvcGVuQWN0aW9ucy5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgb3BlbkFjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgIG9wZW5CdG5BY3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoYHNob3dgKTtcbiAgfVxufSk7XG4iLCJjb25zdCBtb2RhbHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm1vZGFsYCldO1xuY29uc3QgY2xvc2VNb2RhbHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm1vZGFsX19idG4tY2xvc2VgKV07XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm92ZXJsYXlgKTtcblxuY29uc3QgYnV0dG9uc09wZW5Nb2RhbEJ1eSA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuYnV5X19pdGVtLWFkZGApXTtcbmNvbnN0IG1vZGFsQnV5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm1vZGFsLS1idXlgKTtcblxuaWYgKGJ1dHRvbnNPcGVuTW9kYWxCdXkubGVuZ3RoID4gMCkge1xuICBidXR0b25zT3Blbk1vZGFsQnV5LmZvckVhY2goKGJ0bikgPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChgc2hvd2AsIGBzaG93LW1vZGFsYCk7XG4gICAgICBtb2RhbEJ1eS5jbGFzc0xpc3QuYWRkKGBzaG93YCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCBtb2RhbFdyYXBIaWRkZW4gPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm1vZGFsX193cmFwLWhpZGRlbmApXTtcblxuaWYgKGNsb3NlTW9kYWxzLmxlbmd0aCA+IDApIHtcbiAgY2xvc2VNb2RhbHMuZm9yRWFjaCgoYnRuLCBpbmRleCkgPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcbiAgICAgIG1vZGFsc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShgc2hvd2ApO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKGBzaG93YCwgYHNob3ctbW9kYWxgKTtcblxuICAgICAgaWYgKG1vZGFsV3JhcEhpZGRlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgbSBvZiBtb2RhbFdyYXBIaWRkZW4pIHtcbiAgICAgICAgICBtLmNsYXNzTGlzdC5yZW1vdmUoYHNob3dgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgYnV0dG9uc09wZW5Nb2RhbEFkZFVzZXIgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm1vZGFsLWFkZC11c2VyYCldO1xuY29uc3QgbW9kYWxBZGRVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm1vZGFsLS1hZGQtdXNlcmApO1xuXG5pZiAoYnV0dG9uc09wZW5Nb2RhbEFkZFVzZXIubGVuZ3RoID4gMCkge1xuICBidXR0b25zT3Blbk1vZGFsQWRkVXNlci5mb3JFYWNoKChidG4pID0+IHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoYHNob3dgLCBgc2hvdy1tb2RhbGApO1xuICAgICAgbW9kYWxBZGRVc2VyLmNsYXNzTGlzdC5hZGQoYHNob3dgKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IGJ1dHRvbnNPcGVuTW9kYWxSZWNpcGUgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLnBvcHVwLWNvb2stbXlzZWxmYCldO1xuY29uc3QgbW9kYWxSZWNpcGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAubW9kYWwtLXJlY2lwZWApO1xuXG5pZiAoYnV0dG9uc09wZW5Nb2RhbFJlY2lwZS5sZW5ndGggPiAwKSB7XG4gIGJ1dHRvbnNPcGVuTW9kYWxSZWNpcGUuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKGBzaG93YCwgYHNob3ctbW9kYWxgKTtcbiAgICAgIG1vZGFsUmVjaXBlLmNsYXNzTGlzdC5hZGQoYHNob3dgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgYnRuT3BlbldyYXBIaWRkZW4gPSBtb2RhbFJlY2lwZS5xdWVyeVNlbGVjdG9yKGAubW9kYWxfX2J0bi10aXRsZWApO1xuICBjb25zdCB3cmFwSGlkZGVuID0gbW9kYWxSZWNpcGUucXVlcnlTZWxlY3RvcihgLm1vZGFsX193cmFwLWhpZGRlbmApO1xuICBjb25zdCBjbG9zZVdyYXBIaWRkZW4gPSBtb2RhbFJlY2lwZS5xdWVyeVNlbGVjdG9yKGAubW9kYWxfX2J0bi1jbG9zZS13cmFwLWhpZGRlbmApO1xuXG4gIGJ0bk9wZW5XcmFwSGlkZGVuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xuICAgIHdyYXBIaWRkZW4uY2xhc3NMaXN0LmFkZChgc2hvd2ApO1xuICB9KTtcblxuICBjbG9zZVdyYXBIaWRkZW4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XG4gICAgd3JhcEhpZGRlbi5jbGFzc0xpc3QucmVtb3ZlKGBzaG93YCk7XG4gIH0pO1xufVxuIiwiY29uc3QgaW5wdXRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5mb3JtX19yZWNvdmVyeS1pbnB1dCBpbnB1dGApXTtcblxuaWYgKGlucHV0cy5sZW5ndGggPiAwKSB7XG4gIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCAoKSA9PiB7XG4gICAgICBpZiAoaW5wdXQudmFsdWUpIHtcbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKGBoaWRlYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYGhpZGVgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl19